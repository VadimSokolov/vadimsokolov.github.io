{
  "hash": "a61d39b9e311e333cfbb8d95b8a79d4b",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Final Project Guide\"\nsubtitle: \"Orange Juice Pricing Analytics Agent\"\nauthor: \"CAIO Executive Program\"\ndate: today\nformat:\n  html:\n    toc: true\n    toc-depth: 3\n    number-sections: true\n    theme: cosmo\n    code-fold: false\n    code-tools: true\nexecute:\n  eval: false\n  echo: true\n---\n\n## Overview\n\nIn this project, you will build an AI agent that helps a retail pricing analyst make decisions about orange juice pricing and promotions. The agent will:\n\n1. Load and explore sales data\n2. Build a regression model to predict sales\n3. Answer business questions using natural language\n\n**Time Required:** ~2 hours\n\n**Prerequisites:** \n\n- Cursor IDE installed (see `cursor-setup-guide.md`)\n- Basic familiarity with Cursor from Zoom Session 1\n- Download the [project template](project_template.py) to get started quickly\n\n---\n\n## Part 1: Project Setup\n\n### Step 1.1: Create Your Project Folder\n\n1. Open Cursor IDE\n2. Click **File ‚Üí Open Folder**\n3. Create a new folder called `oj-pricing-agent` on your computer\n4. Select that folder to open it in Cursor\n\n### Step 1.2: Create the Main Python File\n\n1. In the Cursor sidebar, right-click and select **New File**\n2. Name it `oj_agent.py`\n3. You'll see an empty file open in the editor\n\n### Step 1.3: Copy the Dataset\n\nDownload the [oj_data.csv](oj_data.csv) file and copy it into your `oj-pricing-agent` folder.\n\n---\n\n## Part 2: Data Loading and Exploration\n\n### Step 2.1: Load the Required Libraries\n\nIn your `oj_agent.py` file, start by adding these lines at the top:\n\n::: {#091e632f .cell execution_count=1}\n``` {.python .cell-code}\n# Required libraries\nimport pandas as pd\nimport numpy as np\nfrom sklearn.linear_model import LinearRegression\nfrom sklearn.preprocessing import OneHotEncoder\nimport warnings\nwarnings.filterwarnings('ignore')\n```\n:::\n\n\n**What this does:** These libraries help us work with data (pandas), do math (numpy), and build models (sklearn).\n\n### Step 2.2: Load the Data\n\nAdd the following code to load the orange juice sales data:\n\n::: {#187abd11 .cell execution_count=2}\n``` {.python .cell-code}\n# Load the orange juice dataset\nprint(\"Loading data...\")\ndf = pd.read_csv('oj_data.csv')\n\n# Display basic information\nprint(f\"Dataset has {len(df)} rows and {len(df.columns)} columns\")\nprint(f\"\\nColumns: {list(df.columns)}\")\nprint(f\"\\nBrands in dataset: {df['brand'].unique()}\")\nprint(f\"\\nPrice range: ${df['price'].min():.2f} - ${df['price'].max():.2f}\")\nprint(f\"\\nSample of data:\")\nprint(df.head())\n```\n:::\n\n\n### Step 2.3: Run Your Code (First Test)\n\n1. Save the file (Ctrl+S or Cmd+S)\n2. Open the terminal in Cursor: **View ‚Üí Terminal**\n3. Run the script:\n\n```bash\npython oj_agent.py\n```\n\nYou should see output showing:\n\n- The dataset has ~28,000 rows\n- Three brands: Tropicana, Minute Maid, Dominick's\n- Price ranges from about $1 to $4\n\n**Troubleshooting:** If you get an error about missing packages, run:\n\n```bash\npip install pandas numpy scikit-learn\n```\n\n---\n\n## Part 3: Building the Regression Model\n\n### Step 3.1: Understanding the Model\n\nWe're building a model that predicts **log of sales volume** based on:\n\n- **Price:** Higher price ‚Üí lower sales (negative relationship)\n- **Featured (feat):** If the product is in the weekly ad circular (1 = yes, 0 = no)\n- **Brand:** Different brands have different base sales levels\n- **Price √ó Brand interaction:** Price sensitivity varies by brand\n\n### Step 3.2: Prepare the Data for Modeling\n\nAdd this code to prepare features for the model:\n\n::: {#e1bec7d7 .cell execution_count=3}\n``` {.python .cell-code}\n# ============================================\n# PART 3: BUILD THE REGRESSION MODEL\n# ============================================\n\nprint(\"\\n\" + \"=\"*50)\nprint(\"Building the pricing model...\")\nprint(\"=\"*50)\n\n# Create dummy variables for brand (one-hot encoding)\n# This converts 'brand' text into numbers the model can use\nbrand_dummies = pd.get_dummies(df['brand'], prefix='brand', drop_first=False)\n\n# Create the feature matrix\n# We include: price, feat, brand dummies, and price*brand interactions\nX = pd.DataFrame({\n    'price': df['price'],\n    'feat': df['feat'],\n    'brand_minute.maid': brand_dummies['brand_minute.maid'],\n    'brand_tropicana': brand_dummies['brand_tropicana'],\n    # Interaction terms: price effect varies by brand\n    'price_x_minute.maid': df['price'] * brand_dummies['brand_minute.maid'],\n    'price_x_tropicana': df['price'] * brand_dummies['brand_tropicana']\n})\n\n# Target variable: log of sales (logmove)\ny = df['logmove']\n\nprint(f\"Features: {list(X.columns)}\")\nprint(f\"Target: logmove (log of sales volume)\")\n```\n:::\n\n\n### Step 3.3: Fit the Model\n\nAdd code to train the regression model:\n\n::: {#0a9f6562 .cell execution_count=4}\n``` {.python .cell-code}\n# Fit the linear regression model\nmodel = LinearRegression()\nmodel.fit(X, y)\n\n# Display the coefficients\nprint(\"\\nModel Coefficients:\")\nprint(\"-\" * 40)\nfor feature, coef in zip(X.columns, model.coef_):\n    print(f\"  {feature}: {coef:.4f}\")\nprint(f\"  intercept: {model.intercept_:.4f}\")\n\n# Calculate R-squared (how well the model fits)\nr_squared = model.score(X, y)\nprint(f\"\\nModel R-squared: {r_squared:.3f}\")\nprint(\"(This means the model explains {:.1f}% of sales variation)\".format(r_squared * 100))\n```\n:::\n\n\n### Step 3.4: Run and Verify the Model\n\nSave and run the script again. You should see coefficients like:\n\n- **price:** negative (higher price = lower sales)\n- **feat:** positive (being featured increases sales)\n- **brand coefficients:** capture baseline differences between brands\n- **interaction terms:** show how price sensitivity differs by brand\n\n---\n\n## Part 4: Creating Helper Functions for the Agent\n\n### Step 4.1: Add Prediction Functions\n\nAdd these functions that the agent will use to answer questions:\n\n::: {#99603d4b .cell execution_count=5}\n``` {.python .cell-code}\n# ============================================\n# PART 4: HELPER FUNCTIONS FOR THE AGENT\n# ============================================\n\ndef predict_sales(brand, price, featured=0):\n    \"\"\"\n    Predict sales volume for a given brand, price, and feature status.\n    \n    Args:\n        brand: 'tropicana', 'minute.maid', or 'dominicks'\n        price: price in dollars (e.g., 2.50)\n        featured: 1 if in ad circular, 0 if not\n    \n    Returns:\n        Predicted sales volume (not log-transformed)\n    \"\"\"\n    # Create feature vector\n    features = {\n        'price': price,\n        'feat': featured,\n        'brand_minute.maid': 1 if brand.lower() == 'minute.maid' else 0,\n        'brand_tropicana': 1 if brand.lower() == 'tropicana' else 0,\n        'price_x_minute.maid': price if brand.lower() == 'minute.maid' else 0,\n        'price_x_tropicana': price if brand.lower() == 'tropicana' else 0\n    }\n    \n    # Convert to dataframe for prediction\n    X_pred = pd.DataFrame([features])\n    \n    # Predict log sales, then convert back\n    log_sales = model.predict(X_pred)[0]\n    sales = np.exp(log_sales)\n    \n    return sales\n\n\ndef get_price_elasticity(brand):\n    \"\"\"\n    Calculate the price elasticity for a given brand.\n    \n    Price elasticity tells us: if price increases by 1%, \n    how much does quantity demanded change (in %)?\n    \n    A more negative number means more price-sensitive.\n    \"\"\"\n    # Base price coefficient\n    base_coef = model.coef_[0]  # price coefficient\n    \n    # Add brand-specific interaction if applicable\n    if brand.lower() == 'minute.maid':\n        interaction_coef = model.coef_[4]  # price_x_minute.maid\n    elif brand.lower() == 'tropicana':\n        interaction_coef = model.coef_[5]  # price_x_tropicana\n    else:  # dominicks (base case)\n        interaction_coef = 0\n    \n    total_elasticity = base_coef + interaction_coef\n    return total_elasticity\n\n\ndef get_advertising_lift(brand):\n    \"\"\"\n    Calculate the sales lift from being featured in advertising.\n    Returns the percentage increase in sales.\n    \"\"\"\n    # The 'feat' coefficient tells us the log-sales increase\n    feat_coef = model.coef_[1]  # feat coefficient\n    \n    # Convert from log to percentage change\n    percentage_lift = (np.exp(feat_coef) - 1) * 100\n    return percentage_lift\n\n\ndef find_optimal_price(brand, min_price=1.0, max_price=4.0, featured=0):\n    \"\"\"\n    Find the price that maximizes revenue for a brand.\n    Revenue = Price √ó Quantity\n    \"\"\"\n    best_price = min_price\n    best_revenue = 0\n    \n    # Search through price range\n    for price in np.arange(min_price, max_price, 0.05):\n        sales = predict_sales(brand, price, featured)\n        revenue = price * sales\n        \n        if revenue > best_revenue:\n            best_revenue = revenue\n            best_price = price\n    \n    return best_price, best_revenue\n\n\ndef compare_elasticities():\n    \"\"\"\n    Compare price elasticity across all three brands.\n    \"\"\"\n    brands = ['dominicks', 'minute.maid', 'tropicana']\n    results = {}\n    \n    for brand in brands:\n        elasticity = get_price_elasticity(brand)\n        results[brand] = elasticity\n    \n    return results\n```\n:::\n\n\n### Step 4.2: Test the Helper Functions\n\nAdd test code to verify the functions work:\n\n::: {#b16557b2 .cell execution_count=6}\n``` {.python .cell-code}\n# ============================================\n# TEST THE HELPER FUNCTIONS\n# ============================================\n\nprint(\"\\n\" + \"=\"*50)\nprint(\"Testing helper functions...\")\nprint(\"=\"*50)\n\n# Test prediction\ntest_sales = predict_sales('tropicana', 2.50, featured=0)\nprint(f\"\\nPredicted sales for Tropicana at $2.50 (no ad): {test_sales:.0f} units\")\n\n# Test elasticity\nelasticities = compare_elasticities()\nprint(\"\\nPrice Elasticities by Brand:\")\nfor brand, elast in elasticities.items():\n    print(f\"  {brand}: {elast:.3f}\")\n\n# Test advertising lift\nlift = get_advertising_lift('minute.maid')\nprint(f\"\\nAdvertising lift: {lift:.1f}% increase in sales\")\n\n# Test optimal price\nopt_price, opt_rev = find_optimal_price('dominicks')\nprint(f\"\\nOptimal price for Dominick's: ${opt_price:.2f} (revenue: ${opt_rev:.2f})\")\n```\n:::\n\n\nRun the script again to verify all functions work correctly.\n\n---\n\n## Part 5: Creating the AI Agent\n\n### Step 5.1: Add the Agent Logic\n\nNow we'll create the agent that interprets natural language questions and calls the appropriate functions. Add this code:\n\n::: {#093b055c .cell execution_count=7}\n``` {.python .cell-code}\n# ============================================\n# PART 5: THE AI AGENT\n# ============================================\n\ndef answer_question(question):\n    \"\"\"\n    Simple agent that answers business questions about OJ pricing.\n    \n    This is a rule-based agent that matches keywords in the question\n    to determine which analysis to perform.\n    \"\"\"\n    question_lower = question.lower()\n    \n    # Question 1: Predict sales for specific scenario\n    if 'predict' in question_lower or 'sales volume' in question_lower:\n        # Extract brand and price from question if possible\n        if 'tropicana' in question_lower:\n            brand = 'tropicana'\n        elif 'minute maid' in question_lower:\n            brand = 'minute.maid'\n        else:\n            brand = 'dominicks'\n        \n        # Look for price (default to $2.50 if not found)\n        import re\n        price_match = re.search(r'\\$?(\\d+\\.?\\d*)', question_lower)\n        price = float(price_match.group(1)) if price_match else 2.50\n        \n        # Check for advertising\n        featured = 1 if 'advertis' in question_lower or 'feature' in question_lower else 0\n        if 'no advertis' in question_lower or 'without advertis' in question_lower:\n            featured = 0\n        \n        sales = predict_sales(brand, price, featured)\n        \n        response = f\"\"\"\n**Predicted Sales Analysis**\n\nBrand: {brand.title().replace('.', ' ')}\nPrice: ${price:.2f}\nFeatured in Ad: {'Yes' if featured else 'No'}\n\n**Predicted Sales Volume: {sales:,.0f} units**\n\nThis prediction is based on our regression model that accounts for:\n- Base demand for this brand\n- Price sensitivity (elasticity)  \n- Advertising effects\n\"\"\"\n        return response\n    \n    # Question 2: Which brand is most price-sensitive?\n    elif 'price-sensitive' in question_lower or 'price sensitive' in question_lower or 'most sensitive' in question_lower:\n        elasticities = compare_elasticities()\n        \n        # Find most price-sensitive (most negative elasticity)\n        most_sensitive = min(elasticities, key=elasticities.get)\n        \n        response = f\"\"\"\n**Price Sensitivity Analysis**\n\nPrice Elasticity by Brand:\n\"\"\"\n        for brand, elast in sorted(elasticities.items(), key=lambda x: x[1]):\n            sensitivity = \"HIGH\" if elast < -3 else \"MEDIUM\" if elast < -2 else \"LOW\"\n            response += f\"- {brand.title().replace('.', ' ')}: {elast:.3f} ({sensitivity} sensitivity)\\n\"\n        \n        response += f\"\"\"\n**Most Price-Sensitive: {most_sensitive.title().replace('.', ' ')}**\n\nInterpretation: A 1% price increase leads to a {abs(elasticities[most_sensitive]):.1f}% decrease in sales for {most_sensitive.title().replace('.', ' ')}.\n\nBusiness Implication: Be careful with price increases on {most_sensitive.title().replace('.', ' ')} - customers are very responsive to price changes.\n\"\"\"\n        return response\n    \n    # Question 3: Should we feature a brand in advertising?\n    elif 'feature' in question_lower or 'ad circular' in question_lower or 'advertising' in question_lower:\n        if 'minute maid' in question_lower:\n            brand = 'minute.maid'\n        elif 'tropicana' in question_lower:\n            brand = 'tropicana'\n        else:\n            brand = 'dominicks'\n        \n        lift = get_advertising_lift(brand)\n        \n        # Calculate example impact\n        base_sales = predict_sales(brand, 2.50, featured=0)\n        featured_sales = predict_sales(brand, 2.50, featured=1)\n        \n        response = f\"\"\"\n**Advertising Impact Analysis for {brand.title().replace('.', ' ')}**\n\nExpected Sales Lift from Featuring: **{lift:.1f}%**\n\nExample at $2.50:\n- Without advertising: {base_sales:,.0f} units\n- With advertising: {featured_sales:,.0f} units  \n- Additional sales: {featured_sales - base_sales:,.0f} units\n\n**Recommendation:** {'Yes, feature this product!' if lift > 20 else 'Consider the advertising cost vs. the sales lift.'}\n\nThe advertising effect is consistent across price points. Factor in your advertising costs to determine if the sales lift justifies the expense.\n\"\"\"\n        return response\n    \n    # Question 4: Optimal price for a brand\n    elif 'optimal price' in question_lower or 'maximize revenue' in question_lower or 'best price' in question_lower:\n        if 'minute maid' in question_lower:\n            brand = 'minute.maid'\n        elif 'tropicana' in question_lower:\n            brand = 'tropicana'\n        else:\n            brand = 'dominicks'\n        \n        opt_price, opt_revenue = find_optimal_price(brand)\n        opt_sales = predict_sales(brand, opt_price, featured=0)\n        \n        # Compare with current average price\n        avg_price = df[df['brand'] == brand]['price'].mean()\n        avg_revenue = avg_price * predict_sales(brand, avg_price, featured=0)\n        \n        response = f\"\"\"\n**Revenue Optimization for {brand.title().replace('.', ' ')}**\n\n**Optimal Price: ${opt_price:.2f}**\n\nAt optimal price:\n- Predicted sales: {opt_sales:,.0f} units\n- Revenue per store-week: ${opt_revenue:,.2f}\n\nComparison with current average (${avg_price:.2f}):\n- Current revenue: ${avg_revenue:,.2f}\n- Potential improvement: ${opt_revenue - avg_revenue:,.2f} ({((opt_revenue/avg_revenue)-1)*100:.1f}%)\n\nNote: This optimization assumes no competitor response and stable market conditions.\n\"\"\"\n        return response\n    \n    # Question 5: Compare elasticities across brands\n    elif 'compare' in question_lower or 'elasticity' in question_lower or 'across' in question_lower:\n        elasticities = compare_elasticities()\n        \n        response = \"\"\"\n**Price Elasticity Comparison Across Brands**\n\n| Brand | Elasticity | Interpretation |\n|-------|------------|----------------|\n\"\"\"\n        for brand, elast in sorted(elasticities.items(), key=lambda x: x[1]):\n            interp = f\"1% price ‚Üë ‚Üí {abs(elast):.1f}% sales ‚Üì\"\n            response += f\"| {brand.title().replace('.', ' ')} | {elast:.3f} | {interp} |\\n\"\n        \n        response += \"\"\"\n**Key Insights:**\n\n1. **Dominick's** (store brand) is least price-sensitive - customers buying store brands may prioritize value and be less responsive to small price changes.\n\n2. **Tropicana** shows moderate price sensitivity - as a premium brand, some customers are loyal but others will switch if prices rise.\n\n3. **Minute Maid** is most price-sensitive - positioned between store and premium brands, these customers actively compare prices.\n\n**Strategic Implications:**\n- Use competitive pricing on Minute Maid to capture price-sensitive shoppers\n- Tropicana can sustain moderate price premiums\n- Dominick's margins can be optimized with less risk of volume loss\n\"\"\"\n        return response\n    \n    else:\n        return \"\"\"\nI can help you with these types of questions:\n\n1. **Sales Prediction:** \"What is the predicted sales volume if we price Tropicana at $2.50?\"\n2. **Price Sensitivity:** \"Which brand is most price-sensitive?\"\n3. **Advertising Impact:** \"Should we feature Minute Maid in the ad circular?\"\n4. **Price Optimization:** \"What price should we set for Dominick's to maximize revenue?\"\n5. **Elasticity Comparison:** \"Compare the price elasticity across brands\"\n\nPlease try one of these questions!\n\"\"\"\n```\n:::\n\n\n### Step 5.2: Add the Interactive Interface\n\nFinally, add code to let users interact with the agent:\n\n::: {#4e67a670 .cell execution_count=8}\n``` {.python .cell-code}\n# ============================================\n# PART 6: INTERACTIVE AGENT INTERFACE\n# ============================================\n\ndef run_agent():\n    \"\"\"\n    Run the interactive agent interface.\n    \"\"\"\n    print(\"\\n\" + \"=\"*60)\n    print(\"üçä ORANGE JUICE PRICING ANALYTICS AGENT üçä\")\n    print(\"=\"*60)\n    print(\"\\nHello! I'm your pricing analytics assistant.\")\n    print(\"I can help you analyze orange juice pricing and promotions.\")\n    print(\"\\nTry asking me questions like:\")\n    print(\"  - What is the predicted sales if we price Tropicana at $2.50?\")\n    print(\"  - Which brand is most price-sensitive?\")\n    print(\"  - Should we feature Minute Maid in the ad circular?\")\n    print(\"  - What price maximizes revenue for Dominick's?\")\n    print(\"  - Compare price elasticity across brands\")\n    print(\"\\nType 'quit' to exit.\\n\")\n    \n    while True:\n        question = input(\"Your question: \").strip()\n        \n        if question.lower() in ['quit', 'exit', 'q']:\n            print(\"\\nThank you for using the OJ Pricing Agent. Goodbye!\")\n            break\n        \n        if not question:\n            continue\n        \n        print(\"\\n\" + \"-\"*50)\n        response = answer_question(question)\n        print(response)\n        print(\"-\"*50 + \"\\n\")\n\n\n# ============================================\n# MAIN: RUN THE AGENT\n# ============================================\n\nif __name__ == \"__main__\":\n    # Run the interactive agent\n    run_agent()\n```\n:::\n\n\n---\n\n## Part 6: Testing Your Agent\n\n### Step 6.1: Run the Complete Script\n\nSave the file and run:\n\n```bash\npython oj_agent.py\n```\n\n### Step 6.2: Test All Five Required Questions\n\nTest your agent with these exact questions:\n\n1. **\"What is the predicted sales volume if we price Tropicana at $2.50 with no advertising?\"**\n\n2. **\"Which brand is most price-sensitive?\"**\n\n3. **\"Should we feature Minute Maid in this week's ad circular? What's the expected sales lift?\"**\n\n4. **\"What price should we set for Dominick's brand to maximize revenue?\"**\n\n5. **\"Compare the price elasticity across the three brands.\"**\n\nRecord the answers for your summary document.\n\n---\n\n## Part 7: Writing Your Summary\n\nCreate a 1-page document (Word or PDF) that includes:\n\n### Section 1: Key Findings (half page)\n\n- Which brand is most/least price-sensitive and why this matters\n- The impact of advertising on sales\n- The optimal pricing recommendations\n\n### Section 2: Surprises and Insights (quarter page)\n\n- What surprised you about the results?\n- How do these findings compare to your intuition?\n\n### Section 3: Business Implications (quarter page)\n\n- How would you recommend a retailer use these insights?\n- What additional data would make this analysis more useful?\n\n---\n\n## Part 8: Preparing Your Demo\n\nFor Zoom Session 3, prepare a 2-3 minute demonstration:\n\n1. **Setup (30 sec):** Briefly explain what the agent does\n2. **Demo (1.5 min):** Show 2-3 questions and responses\n3. **Insight (1 min):** Share your most interesting finding\n\n**Tips:**\n\n- Have your script running before you share screen\n- Pre-type a question so you're not typing live\n- Focus on business insights, not technical details\n\n---\n\n## Troubleshooting\n\n### \"ModuleNotFoundError: No module named 'pandas'\"\n\nRun: `pip install pandas numpy scikit-learn`\n\n### \"FileNotFoundError: oj_data.csv\"\n\nMake sure the data file is in the same folder as your Python script.\n\n### \"Model coefficients look wrong\"\n\nCheck that your data loaded correctly - you should have ~28,000 rows.\n\n### \"Agent doesn't understand my question\"\n\nTry rephrasing using keywords like \"predict\", \"price-sensitive\", \"feature\", \"optimal\", or \"compare\".\n\n---\n\n## Complete Code Reference\n\nThe complete `oj_agent.py` file should be approximately 350-400 lines. If you get stuck, ask Cursor's AI assistant for help by selecting your code and pressing Cmd+K (Mac) or Ctrl+K (Windows), then describing your issue.\n\n---\n\n## Next Steps (Optional Enhancements)\n\nIf you finish early and want to explore further:\n\n1. **Add more questions:** What other business questions could the agent answer?\n2. **Improve the NLP:** Use fuzzy matching to better understand varied phrasings\n3. **Add visualizations:** Create charts showing price vs. sales by brand\n4. **Connect to an LLM:** Use the OpenAI API to make the agent truly conversational\n\nGood luck with your project! üçä\n\n",
    "supporting": [
      "final-project-guide_files"
    ],
    "filters": [],
    "includes": {}
  }
}